{%- if section.settings.background != settings.background and section.settings.background != 'rgba(0,0,0,0)' -%}
    {%- assign blends_with_background = false -%}
  {%- else -%}
    {%- assign blends_with_background = true -%}
  {%- endif -%}
  
  <style>
    #shopify-section-{{ section.id }} {
      {%- if section.settings.background == 'rgba(0,0,0,0)' -%}
        {%- assign section_background = settings.background -%}
      {%- else -%}
        {%- assign section_background = section.settings.background -%}
      {%- endif -%}
  
      {%- if section.settings.text_color == 'rgba(0,0,0,0)' -%}
        {%- assign heading_color = settings.heading_color -%}
        {%- assign text_color = settings.text_color -%}
      {%- else -%}
        {%- assign heading_color = section.settings.text_color -%}
        {%- assign text_color = section.settings.text_color -%}
      {%- endif -%}
  
      --heading-color: {{ heading_color.red }}, {{ heading_color.green }}, {{ heading_color.blue }};
      --text-color: {{ text_color.red }}, {{ text_color.green }}, {{ text_color.blue }};
      --section-background: {{ section_background.red }}, {{ section_background.green }}, {{ section_background.blue }};
    }
  </style>
  
  <section class="section section--flush">
    <div class="section__color-wrapper vertical-breather">
      <div class="container">

        <div class="nifty-fifty-text hide-mobile">
            {{ section.settings.text }}
        </div>

        <div class="nifty-fifty-text hide-desktop">
          {{ section.settings.text_mobile }}
      </div>
      </div>
    </div>
  </section>

  <script>
document.addEventListener("DOMContentLoaded", function () {
  const animatedElements = document.querySelectorAll('.nifty-fifty-text i');

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate-before');
      } else {
        entry.target.classList.remove('animate-before');
      }
    });
  }, { threshold: 0.1 });

  animatedElements.forEach(element => {
    observer.observe(element);
  });
});
  </script>
  
  {% schema %}
  {
    "name": "Nifty Fifty (Text)",
    "class": "shopify-section--nifty-fifty-text",
    "disabled_on": {
      "groups": ["header", "custom.overlay"]
    },
    "settings": [
        {
          "type": "textarea",
          "id": "text",
          "label": "Text",
          "info": "Use <i>text</i> to highlight scrollable text."
        },
        {
          "type": "textarea",
          "id": "text_mobile",
          "label": "Text (Mobile)",
          "info": "Use <i>text</i> to highlight scrollable text."
        }
    ],
    "presets": [
      {
        "name": "Nifty Fifty (Text)"
      }
    ]
  }
  {% endschema %}