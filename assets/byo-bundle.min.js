window.onerror=function(e,t,a,o,d){console.log("JS Error:",e,t,a,o,d)};let byoBundleCounterItems=0,byoBundleCounterPrice=0;document.addEventListener("DOMContentLoaded",(function(e){$(".product-item--BYO-ATC,.product-item--BYO-ATC-variant").on("click",(function(){try{if(!$(this).hasClass("disabled")){const e=$(this).data("id"),t=$(this).data("image"),a=Number($(this).data("price"))||0;$(this).hasClass("active")?($(this).removeClass("active"),byoBundleCounterPrice-=a,byoBundleCounterItems-=1,$(".build-your-build--selected-items img[data-id='"+e+"']").remove()):($(this).addClass("active"),byoBundleCounterPrice+=a,byoBundleCounterItems+=1,$(".build-your-build--selected-items").append('<img src="'+t+'" data-id="'+e+'" class="selected-item-image">')),$(".build-your-bundle--cost").text((byoBundleCounterPrice/100).toFixed(2)),byoBundleCounterItems>=4?$(".add-bundle-to-cart").removeClass("under").prop("disabled",!1):$(".add-bundle-to-cart").addClass("under").prop("disabled",!0)}}catch(e){console.error("Error in BYO click handler:",e)}})),$(".add-bundle-to-cart").on("click",(function(){var e={};$(this).hasClass("under")||($(this).addClass("loading"),$(this).prop("disabled",!0),$(".product-item--BYO-ATC.active,.product-item--BYO-ATC-variant.active").each((function(t,a){var o={quantity:1,id:$(a).data("id"),properties:{"BYO Bundle":"Select four or more unique products. Then weâ€™ll knock off 10%.",_tags:`${$(a).data("tags")}`}};e[t]=o})),$.ajax({url:"/cart/add.js",type:"POST",data:{items:e},dataType:"json"}).done((function(e){!async function(){try{const e=await fetch(`${window.themeVariables.routes.cartUrl}.js`,{cache:"reload"});if(!e.ok)throw new Error(`Failed to fetch cart data: ${e.status} ${e.statusText}`);const t=await e.json();document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{detail:{cart:t}})),document.getElementById("mini-cart").open=!0}catch(e){console.error("Error refreshing cart:",e)}}(),console.log(e),byoBundleCounterPrice=0,byoBundleCounterItems=0,$(".build-your-build--selected-items").empty(),$(".add-bundle-to-cart").removeClass("loading").addClass("under"),$(".build-your-bundle--cost").text("0.00"),$(".product-item--BYO-ATC.active, .product-item--BYO-ATC-variant.active").removeClass("active")})))}))}));