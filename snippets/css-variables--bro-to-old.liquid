{%- assign fontHeading = "MillerDisplay" -%}
{%- assign fontBody = "FFMarkWebPro" -%}

<style>
  :root {
    {%- assign border_color = settings.broto_background | color_mix: settings.broto_text_color, 85 -%}
    {%- assign border_color_darker = settings.broto_background | color_mix: settings.broto_text_color, 60 -%}
    {%- assign success_background = settings.broto_background | color_mix: settings.broto_success_color, 80 -%}
    {%- assign error_background = settings.broto_background | color_mix: settings.broto_error_color, 93 -%}
    {%- assign product_custom_label_brightness = settings.broto_product_custom_label_background | color_brightness -%}
    {%- assign product_custom_label_2_brightness = settings.broto_product_custom_label_2_background | color_brightness -%}

    --color-primary: #ef3534;
    --color-secondary: #192a42;

    --heading-color: {{ settings.broto_heading_color.red }}, {{ settings.broto_heading_color.green }}, {{ settings.broto_heading_color.blue }};
    --text-color: {{ settings.broto_text_color.red }}, {{ settings.broto_text_color.green }}, {{ settings.broto_text_color.blue }};
    --background: {{ settings.broto_background.red }}, {{ settings.broto_background.green }}, {{ settings.broto_background.blue }};
    --secondary-background: {{ settings.broto_secondary_background.red }}, {{ settings.broto_secondary_background.green }}, {{ settings.broto_secondary_background.blue }};
    --border-color: {{ border_color.red }}, {{ border_color.green }}, {{ border_color.blue }};
    --border-color-darker: {{ border_color_darker.red }}, {{ border_color_darker.green }}, {{ border_color_darker.blue }};
    --success-color: {{ settings.broto_success_color.red }}, {{ settings.broto_success_color.green }}, {{ settings.broto_success_color.blue }};
    --success-background: {{ success_background.red }}, {{ success_background.green }}, {{ success_background.blue }};
    --error-color: {{ settings.broto_error_color.red }}, {{ settings.broto_error_color.green }}, {{ settings.broto_error_color.blue }};
    --error-background: {{ error_background.red }}, {{ error_background.green }}, {{ error_background.blue }};
    --primary-button-background: {{ settings.broto_primary_button_background.red }}, {{ settings.broto_primary_button_background.green }}, {{ settings.broto_primary_button_background.blue }};
    --primary-button-text-color: {{ settings.broto_primary_button_text_color.red }}, {{ settings.broto_primary_button_text_color.green }}, {{ settings.broto_primary_button_text_color.blue }};
    --secondary-button-background: {{ settings.broto_secondary_button_background.red }}, {{ settings.broto_secondary_button_background.green }}, {{ settings.broto_secondary_button_background.blue }};
    --secondary-button-text-color: {{ settings.broto_secondary_button_text_color.red }}, {{ settings.broto_secondary_button_text_color.green }}, {{ settings.broto_secondary_button_text_color.blue }};
    --product-star-rating: {{ settings.broto_product_rating_color.red }}, {{ settings.broto_product_rating_color.green }}, {{ settings.broto_product_rating_color.blue }};
    --product-on-sale-accent: {{ settings.broto_product_on_sale_accent.red }}, {{ settings.broto_product_on_sale_accent.green }}, {{ settings.broto_product_on_sale_accent.blue }};
    --product-sold-out-accent: {{ settings.broto_product_sold_out_accent.red }}, {{ settings.broto_product_sold_out_accent.green }}, {{ settings.broto_product_sold_out_accent.blue }};
    --product-custom-label-background: {{ settings.broto_product_custom_label_background.red }}, {{ settings.broto_product_custom_label_background.green }}, {{ settings.broto_product_custom_label_background.blue }};
    --product-custom-label-text-color: {% if product_custom_label_brightness < 150 %}255, 255, 255{% else %}0, 0, 0{% endif %};
    --product-custom-label-2-background: {{ settings.broto_product_custom_label_2_background.red }}, {{ settings.broto_product_custom_label_2_background.green }}, {{ settings.broto_product_custom_label_2_background.blue }};
    --product-custom-label-2-text-color: {% if product_custom_label_2_brightness < 150 %}255, 255, 255{% else %}0, 0, 0{% endif %};
    --product-low-stock-text-color: {{ settings.broto_product_low_stock_text_color.red }}, {{ settings.broto_product_low_stock_text_color.green }}, {{ settings.broto_product_low_stock_text_color.blue }};
    --product-in-stock-text-color: {{ settings.broto_product_in_stock_text_color.red }}, {{ settings.broto_product_in_stock_text_color.green }}, {{ settings.broto_product_in_stock_text_color.blue }};
    --loading-bar-background: {{ settings.broto_text_color.red }}, {{ settings.broto_text_color.green }}, {{ settings.broto_text_color.blue }};

    /* We duplicate some "base" colors as root colors, which is useful to use on drawer elements or popover without. Those should not be overridden to avoid issues */
    --root-heading-color: {{ settings.broto_heading_color.red }}, {{ settings.broto_heading_color.green }}, {{ settings.broto_heading_color.blue }};
    --root-text-color: {{ settings.broto_text_color.red }}, {{ settings.broto_text_color.green }}, {{ settings.broto_text_color.blue }};
    --root-background: {{ settings.broto_background.red }}, {{ settings.broto_background.green }}, {{ settings.broto_background.blue }};
    --root-border-color: {{ border_color.red }}, {{ border_color.green }}, {{ border_color.blue }};
    --root-primary-button-background: {{ settings.broto_primary_button_background.red }}, {{ settings.broto_primary_button_background.green }}, {{ settings.broto_primary_button_background.blue }};
    --root-primary-button-text-color: {{ settings.broto_primary_button_text_color.red }}, {{ settings.broto_primary_button_text_color.green }}, {{ settings.broto_primary_button_text_color.blue }};

    --base-font-size: {{ settings.broto_text_font_size }}px;
    --heading-font-family: {{ fontHeading }};
    --heading-font-weight: bold;
    --heading-font-style: "normal";
    --heading-text-transform: {{ settings.broto_heading_text_transform }};
    --text-font-family: "{{ fontBody }}";
    --text-font-weight: 400;
    --text-font-style: "normal";
    --text-font-bold-weight: bold;

    /* Typography (font size) */
    --heading-xxsmall-font-size: {% if settings.broto_heading_font_size == 'small' %}10px{% else %}11px{% endif %};
    --heading-xsmall-font-size: {% if settings.broto_heading_font_size == 'small' %}10px{% else %}11px{% endif %};
    --heading-small-font-size: {% if settings.broto_heading_font_size == 'small' %}11px{% elsif settings.broto_heading_font_size == 'medium' %}12px{% else %}13px{% endif %};
    --heading-large-font-size: {% if settings.broto_heading_font_size == 'small' %}32px{% elsif settings.broto_heading_font_size == 'medium' %}36px{% else %}40px{% endif %};
    --heading-h1-font-size: {% if settings.broto_heading_font_size == 'small' %}32px{% elsif settings.broto_heading_font_size == 'medium' %}36px{% else %}40px{% endif %};
    --heading-h2-font-size: {% if settings.broto_heading_font_size == 'small' %}28px{% elsif settings.broto_heading_font_size == 'medium' %}30px{% else %}32px{% endif %};
    --heading-h3-font-size: {% if settings.broto_heading_font_size == 'small' %}26px{% elsif settings.broto_heading_font_size == 'medium' %}26px{% else %}28px{% endif %};
    --heading-h4-font-size: {% if settings.broto_heading_font_size == 'small' %}22px{% elsif settings.broto_heading_font_size == 'medium' %}24px{% else %}26px{% endif %};
    --heading-h5-font-size: {% if settings.broto_heading_font_size == 'small' %}18px{% elsif settings.broto_heading_font_size == 'medium' %}20px{% else %}22px{% endif %};
    --heading-h6-font-size: {% if settings.broto_heading_font_size == 'small' %}16px{% elsif settings.broto_heading_font_size == 'medium' %}16px{% else %}18px{% endif %};

    /* Control the look and feel of the theme by changing radius of various elements */
    --image-border-radius: 0;
    --button-border-radius: {{ settings.broto_button_border_radius }}px;
    --block-border-radius: {% if settings.broto_block_border_radius == 'none' %}0{% elsif settings.broto_block_border_radius == 'small' %}8{% elsif settings.broto_block_border_radius == 'medium' %}16{% else %}32{% endif %}px;
    --block-border-radius-reduced: {% if settings.broto_block_border_radius == 'none' %}0{% elsif settings.broto_block_border_radius == 'small' %}4{% elsif settings.broto_block_border_radius == 'medium' %}8{% else %}16{% endif %}px;
    --color-swatch-border-radius: {% if settings.broto_round_color_swatches %}100%{% else %}0px{% endif %};

    /* Button size */
    --button-height: 48px;
    --button-small-height: 40px;

    /* Form related */
    --form-input-field-height: 48px;
    --form-input-gap: 16px;
    --form-submit-margin: 24px;

    /* Product listing related variables */
    --product-list-block-spacing: 32px;

    /* Video related */
    --play-button-background: {{ settings.broto_background.red }}, {{ settings.broto_background.green }}, {{ settings.broto_background.blue }};
    --play-button-arrow: {{ settings.broto_text_color.red }}, {{ settings.broto_text_color.green }}, {{ settings.broto_text_color.blue }};

    /* RTL support */
    --transform-logical-flip: {% if direction == 'ltr' %}1{% else %}-1{% endif %};
    --transform-origin-start: {% if direction == 'ltr' %}left{% else %}right{% endif %};
    --transform-origin-end: {% if direction == 'ltr' %}right{% else %}left{% endif %};

    /* Other */
    --zoom-cursor-svg-url: url({{ 'zoom-cursor.svg' | asset_url }});
    --arrow-right-svg-url: url({{ 'arrow-right.svg' | asset_url }});
    --arrow-left-svg-url: url({{ 'arrow-left.svg' | asset_url }});

    /* Some useful variables that we can reuse in our CSS. Some explanation are needed for some of them:
       - container-max-width-minus-gutters: represents the container max width without the edge gutters
       - container-outer-width: considering the screen width, represent all the space outside the container
       - container-outer-margin: same as container-outer-width but get set to 0 inside a container
       - container-inner-width: the effective space inside the container (minus gutters)
       - grid-column-width: represents the width of a single column of the grid
       - vertical-breather: this is a variable that defines the global "spacing" between sections, and inside the section
                            to create some "breath" and minimum spacing
     */
    --container-max-width: 1440px;
    --container-gutter: 24px;
    --container-max-width-minus-gutters: calc(var(--container-max-width) - (var(--container-gutter)) * 2);
    --container-outer-width: max(calc((100vw - var(--container-max-width-minus-gutters)) / 2), var(--container-gutter));
    --container-outer-margin: var(--container-outer-width);
    --container-inner-width: calc(100vw - var(--container-outer-width) * 2);

    --grid-column-count: 10;
    --grid-gap: 24px;
    --grid-column-width: calc((100vw - var(--container-outer-width) * 2 - var(--grid-gap) * (var(--grid-column-count) - 1)) / var(--grid-column-count));

    --vertical-breather: {% if settings.broto_vertical_spacing == 'small' %}28px{% elsif settings.broto_vertical_spacing == 'medium' %}36px{% else %}48px{% endif %};
    --vertical-breather-tight: {% if settings.broto_vertical_spacing == 'small' %}28px{% elsif settings.broto_vertical_spacing == 'medium' %}36px{% else %}48px{% endif %};

    /* Shopify related variables */
    --payment-terms-background-color: {{ settings.broto_background }};
  }

  @media screen and (min-width: 741px) {
    :root {
      --container-gutter: 40px;
      --grid-column-count: 20;
      --vertical-breather: {% if settings.broto_vertical_spacing == 'small' %}40px{% elsif settings.broto_vertical_spacing == 'medium' %}48px{% else %}64px{% endif %};
      --vertical-breather-tight: {% if settings.broto_vertical_spacing == 'small' %}40px{% elsif settings.broto_vertical_spacing == 'medium' %}48px{% else %}64px{% endif %};

      /* Typography (font size) */
      --heading-xsmall-font-size: {% if settings.broto_heading_font_size == 'small' %}11px{% elsif settings.broto_heading_font_size == 'medium' %}12px{% else %}13px{% endif %};
      --heading-small-font-size: {% if settings.broto_heading_font_size == 'small' %}12px{% elsif settings.broto_heading_font_size == 'medium' %}13px{% else %}14px{% endif %};
      --heading-large-font-size: {% if settings.broto_heading_font_size == 'small' %}48px{% elsif settings.broto_heading_font_size == 'medium' %}52px{% else %}58px{% endif %};
      --heading-h1-font-size: {% if settings.broto_heading_font_size == 'small' %}48px{% elsif settings.broto_heading_font_size == 'medium' %}48px{% else %}58px{% endif %};
      --heading-h2-font-size: {% if settings.broto_heading_font_size == 'small' %}36px{% elsif settings.broto_heading_font_size == 'medium' %}38px{% else %}44px{% endif %};
      --heading-h3-font-size: {% if settings.broto_heading_font_size == 'small' %}30px{% elsif settings.broto_heading_font_size == 'medium' %}32px{% else %}36px{% endif %};
      --heading-h4-font-size: {% if settings.broto_heading_font_size == 'small' %}22px{% elsif settings.broto_heading_font_size == 'medium' %}24px{% else %}28px{% endif %};
      --heading-h5-font-size: {% if settings.broto_heading_font_size == 'small' %}18px{% elsif settings.broto_heading_font_size == 'medium' %}20px{% else %}22px{% endif %};
      --heading-h6-font-size: {% if settings.broto_heading_font_size == 'small' %}16px{% elsif settings.broto_heading_font_size == 'medium' %}18px{% else %}20px{% endif %};

      /* Form related */
      --form-input-field-height: 52px;
      --form-submit-margin: 32px;

      /* Button size */
      --button-height: 52px;
      --button-small-height: 44px;
    }
  }

  @media screen and (min-width: 1200px) {
    :root {
      --vertical-breather: {% if settings.broto_vertical_spacing == 'small' %}48px{% elsif settings.broto_vertical_spacing == 'medium' %}64px{% else %}80px{% endif %};
      --vertical-breather-tight: {% if settings.broto_vertical_spacing == 'small' %}48px{% elsif settings.broto_vertical_spacing == 'medium' %}48px{% else %}64px{% endif %};
      --product-list-block-spacing: 48px;

      /* Typography */
      --heading-large-font-size: {% if settings.broto_heading_font_size == 'small' %}58px{% elsif settings.broto_heading_font_size == 'medium' %}64px{% else %}72px{% endif %};
      --heading-h1-font-size: {% if settings.broto_heading_font_size == 'small' %}50px{% elsif settings.broto_heading_font_size == 'medium' %}56px{% else %}62px{% endif %};
      --heading-h2-font-size: {% if settings.broto_heading_font_size == 'small' %}44px{% elsif settings.broto_heading_font_size == 'medium' %}48px{% else %}54px{% endif %};
      --heading-h3-font-size: {% if settings.broto_heading_font_size == 'small' %}32px{% elsif settings.broto_heading_font_size == 'medium' %}36px{% else %}40px{% endif %};
      --heading-h4-font-size: {% if settings.broto_heading_font_size == 'small' %}26px{% elsif settings.broto_heading_font_size == 'medium' %}30px{% else %}34px{% endif %};
      --heading-h5-font-size: {% if settings.broto_heading_font_size == 'small' %}22px{% elsif settings.broto_heading_font_size == 'medium' %}24px{% else %}26px{% endif %};
      --heading-h6-font-size: {% if settings.broto_heading_font_size == 'small' %}16px{% elsif settings.broto_heading_font_size == 'medium' %}18px{% else %}18px{% endif %};
    }
  }

  @media screen and (min-width: 1600px) {
    :root {
      --vertical-breather: {% if settings.broto_vertical_spacing == 'small' %}48px{% elsif settings.broto_vertical_spacing == 'medium' %}64px{% else %}90px{% endif %};
      --vertical-breather-tight: {% if settings.broto_vertical_spacing == 'small' %}48px{% elsif settings.broto_vertical_spacing == 'medium' %}48px{% else %}64px{% endif %};
    }
  }
</style>