<section class="media-grid-layout {% if section.settings.hide_desktop %}hide-desktop{% endif %} {% if section.settings.hide_mobile %}hide-mobile{% endif %}">
    <div class="container container--medium">
  <div
    class="media-grid"
    style="--gap: {{ section.settings.grid_gap }}px"
  >
    {% for block in section.blocks %}
      {% assign type = block.settings.media_type %}
      <div class="media-grid__item" {{ block.shopify_attributes }} data-index="{{ forloop.index }}">
        {% if type == 'image' and block.settings.image != blank %}
          <img
            src="{{ block.settings.image | img_url: '900x' }}"
            alt="{{ block.settings.description | escape }}"
            class="media-grid__image"
          >
        {% elsif type == 'video' %}
          {% if block.settings.video != blank or block.settings.video_url != blank %}
            <div class="media-grid__video-wrapper">
              {% if block.settings.video != blank %}
                {% if block.settings.video_poster != blank %}
                  {% assign posterImage = block.settings.video_poster | image_url: width: 1200 %}
                {% else %}
                  {% assign posterImage = "none" %}
                {% endif %}
                {{ block.settings.video | video_tag: controls: true, playsinline: true, loop: true, poster: posterImage, autoplay: true }}
              {% elsif block.settings.video_url != blank %}
                {% if block.settings.video_url.type == 'youtube' %}
                  <iframe src="https://www.youtube.com/embed/{{ block.settings.video_url.id }}?playsinline=1&autoplay=1&controls=1&loop=1&playlist={{ block.settings.video_url.id }}&enablejsapi=1&rel=0&modestbranding=1" frameborder="0" allowfullscreen></iframe>
                {% elsif block.settings.video_url.type == 'vimeo' %}
                  <iframe src="https://player.vimeo.com/video/{{ block.settings.video_url.id }}?autoplay=0&autopause=1&loop=1&muted=0&transparent=0&responsive=1&portrait=0&title=0&byline=0" frameborder="0" allowfullscreen></iframe>
                {% endif %}
              {% endif %}
            </div>
          {% endif %}
        {% endif %}
        {% if block.settings.description != blank %}
          <div class="media-grid__desc">{{ block.settings.description }}</div>
        {% endif %}
      </div>
    {% endfor %}
  </div>
  </div>
</section>

{% schema %}
{
  "name": "Media Grid Layout",
  "settings": [
    {
      "type": "header",
      "content": "Section Settings"
    },
    {
    "type": "checkbox",
    "id": "hide_mobile",
    "label": "Hide Mobile?"
    },
    {
    "type": "checkbox",
    "id": "hide_desktop",
    "label": "Hide Desktop?"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 24,
      "label": "Grid Gap"
    }
  ],
  "blocks": [
    {
      "type": "media_item",
      "name": "Media Item",
      "settings": [
        {
          "type": "select",
          "id": "media_type",
          "label": "Media Type",
          "options": [
            { "value": "image", "label": "Image" },
            { "value": "video", "label": "Video" }
          ],
          "default": "image"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "video",
          "id": "video",
          "label": "Video upload (9:16 format)"
        },
        {
          "type": "image_picker",
          "id": "video_poster",
          "label": "Video poster image",
          "info": "Shown before playback on uploaded videos (recommended 1500 x 1800px JPG)"
        },
        {
          "type": "video_url",
          "id": "video_url",
          "label": "External video (YouTube or Vimeo)",
          "accept": ["youtube", "vimeo"]
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Description",
          "default": "<p>Description here</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Media Grid Layout",
      "blocks": [
        { "type": "media_item" },
        { "type": "media_item" },
        { "type": "media_item" }
      ]
    }
  ]
}
{% endschema %}



<style>
.media-grid-layout {
  padding: 40px 0;
}
.media-grid {
height: 160vh;
  display: grid;
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(6, 1fr);
  gap: var(--gap);
  align-items: start;
}

.media-grid__video-wrapper {
    height: 100%;
}

.media-grid__image,
.media-grid__video-wrapper iframe,
.media-grid__video-wrapper video {
  width: 100%;
  height: 100%;
  display: block;
  object-fit: cover;
}
.media-grid .media-grid__desc {
  margin: 8px 0 !important;
  text-align: left;
  font-size: 14px;
  display: block;
}

.media-grid__item {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 20px 0;
}

.media-grid__item[data-index="1"] { grid-area: 1 / 1 / 3 / 2; }
.media-grid__item[data-index="2"] { grid-area: 1 / 2 / 4 / 3; }
.media-grid__item[data-index="3"] { grid-area: 2 / 3 / 4 / 4; flex-direction: column-reverse;}
.media-grid__item[data-index="4"] { grid-area: 4 / 1 / 6 / 2; }
.media-grid__item[data-index="5"] { grid-area: 4 / 2 / 7 / 3; }
.media-grid__item[data-index="6"] { grid-area: 5 / 3 / 7 / 4; flex-direction: column-reverse;}
</style>